<!DOCTYPE html>
<!-- saved from url=(0052)https://jacness12334.github.io/VirtualSky/tests.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<!--[if lt IE 9]><script src="excanvas.min.js"></script><![endif]-->
	<script src="https://maphilli14.github.io/allskyplanetarium/jquery-1.10.0.min.js"></script>
	<script src="https://maphilli14.github.io/allskyplanetarium/virtualsky.js" type="text/javascript"></script>
	<script>
	<script>
		function geoIP(){
			if($('#'+this.id+'_geoip').length == 0){
				var eg = "e.g. Cardiff, UK";
				$('#'+this.id+'_geo').append('<div style="text-align:center;margin-top:4px;"><form id="'+this.id+'_geoip"><input id="'+this.id+'_location" value="'+eg+'" style="width:12em;"> <input id="'+this.id+'_geoip_btn" type="submit" value="Search" /><br /><span id="'+this.id+'_geoip_message"><\/span><\/form><\/div>');
				// Store current state of the keyboard variable
				// When we're in the input field, we don't want to change the sky
				$('#'+this.id+'_location').bind('focus',{sky:this},function(e){
					e.data.sky.keyboard = false;
					if($('#'+e.data.sky.id+'_location').val() == eg) $('#'+e.data.sky.id+'_location').val('');
				}).bind('blur',{sky:this,key:this.keyboard},function(e){
					e.data.sky.keyboard = e.data.key;
					if(!$('#'+e.data.sky.id+'_location').val()){
						$('#'+e.data.sky.id+'_location').val(eg);
						$('#'+e.data.sky.id+'_geoip_message').html('');
						e.data.sky.lightbox($('#'+e.data.sky.id+'_geo'));
					}
				});
				$('#'+this.id+'_geoip').bind('submit',{sky:this},function(e){
					e.preventDefault();
					if($('#'+e.data.sky.id+'_location').val() == eg){
						$('#'+e.data.sky.id+'_geoip_message').html('You need to enter a place to search for.');
						return false;
					}
					var _object = e.data.sky;
					$('#'+e.data.sky.id+'_geoip_message').html('Trying to identify location...')
					loc = escape($('#'+e.data.sky.id+'_location').val());
					$.ajax({
						dataType: "json",
						url:'http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20geo.places%20where%20text%3D%22'+loc+'%22&format=json&diagnostics=true&callback=?',
						context: _object,
						success: function(data){
							failed = false;
							if(data.query.results && typeof data.query.results.place=="object"){
								place = data.query.results.place;
								if(place.length > 1){
									var str = '<form><select><option value="-1">Select...<\/option>';
									$('#'+_object.id+'_geoip_message').html();
									for(i = 0; i < place.length ; i++){
										str += '<option value="'+i+'">'+place[i].name+', '+place[i].admin1.content+', '+place[i].country.content+'<\/option>';
									}
									str += '<\/select><\/form>';
									$('#'+_object.id+'_geoip_message').append(str);
									$('#'+_object.id+'_geoip_message select').on('change',{sky:this,place:place},function(e){
										var i = $(this).find(':selected').val();
										if(i >= 0){
											var sky = e.data.sky;
											sky.latitude = parseFloat(e.data.place[i].centroid.latitude);
											sky.longitude = parseFloat(e.data.place[i].centroid.longitude);
											$('#'+sky.id+'_lat').val(sky.latitude);
											$('#'+sky.id+'_long').val(sky.longitude);
											sky.draw();
											sky.setClock(0);
										}
									});

									this.lightbox($('#'+this.id+'_geo'));
								}else{
									if(data.query.results.place.centroid){
										lat = data.query.results.place.centroid.latitude;
										lon = data.query.results.place.centroid.longitude;
										place = data.query.results.place.placeTypeName.content+' in '+data.query.results.place.country.content
										_object.latitude = parseFloat(lat);
										_object.longitude = parseFloat(lon);
										$('#'+_object.id+'_lat').val(this.latitude);
										$('#'+_object.id+'_long').val(this.longitude);
										$('#'+_object.id+'_geoip_message').html(place);
										_object.draw();
										_object.setClock(0);
									}else{
										failed = true;
									}
								}
							}else failed = true;
							if(failed){
								$('#'+this.id+'_geoip_message').html('Failed to find the location');
							}
						}
					});
				});
			}
		}
		window.onload = function(){
			//planetarium = new VirtualSky({id:'starmapper',callback:{geo:geoIP}});
			planetarium = $.virtualsky({id:'starmapper',callback:{geo:geoIP},fullscreen:true});
			planetarium.draw();
		};
	</script>
	$(document).ready(function() {
		var planetarium = $.virtualsky({
			id: 'starmap',
			mouse: false,
			keyboard: true,
			ground: true,
			showgalaxy: true,
			showplanets: true,
			showplanetlabels: true,
			ecliptic: true,
			cardinalpoints: true,
			constellations: true,
			constellationlabels: true,
			showstarlabels: true,
			negative: false,
			meridian: true,
			az: 183,
			latitude: 35.7,
			longitude: -78.72

			});

	});
	</script>
<style type="text/css">
.virtualsky_help { padding:10px;background-color:white;border-radius:0.5em;-moz-border-radius:0.5em;-webkit-border-radius:0.5em;}
.virtualsky_help ul { list-style:none;margin:0px;padding:0px; }
.virtualsky_infobox { background-color:#ffffff;color:black;padding:55px;border-radius:0.5em;-moz-border-radius:0.5em;-webkit-border-radius:0.5em;box-shadow:0px 0px 20px rgba(255,255,255,0.5);}	
.virtualsky_infobox img {}
.virtualsky_infocredit {color:white;float:left;font-size:0.8em;padding:55px;position:absolute;}
.virtualskyform { position:absolute;z-index:20;display:block;overflow:hidden;background-color:#ddd;padding:10px;box-shadow:0px 0px 200px rgba(255,255,255,0.5);border-radius:0.5em;-moz-border-radius:0.5em;-webkit-border-radius:0.5em; }
.virtualsky_dismiss { float:right;padding: 0 5px 0 5px;margin:0px;font-weight:bold;cursor:pointer;color:black;margin-right:-5px;margin-top:-5px; }
.virtualskyform input,.virtualskyform .divider { display:inline-block;font-size:1em;text-align:center;margin-right:25px; }
.virtualskyform .divider { margin-top: 55px; padding: 2px;}
.virtualsky_help_key:active{ background:#e9e9e9; }
.virtualsky_help_key:hover{ border-color: #b0b0b0; }
.virtualsky_help_key { cursor:pointer;display:inline-block;text-align:center;background:#f0f0f0;background:-moz-linear-gradient(top,#f0f0f0,#fcfcfc);background:-webkit-gradient(linear,center top,center bottom,from(#f0f0f0),to(#fcfcfc));border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box;color:#303030;border:1px solid #e0e0e0;border-bottom-width:2px;white-space:nowrap;font-family:monospace;padding:1px 6px;font-size:1.1em;}</style></head>

<body style="" class=" hasGoogleVoiceExt">
	<div id="starmap" style="width:1331px;height:1331px;opacity: 0.55; position: relative; top: -45px; left: 246px; z-index: 10;"><canvas id="starmap_inner" style="display:block;"></canvas></div>
	<div id="mike" style="width:100%;height:100%;position: absolute;top: 0;left: 0;"><img src="https://f002.backblazeb2.com/file/allsky/liveview-image.jpg" class="hoverZoomLink"></div>

<script>
   $("#mike").click(()=>{$("#starmap").show()});
$("#starmap").click(()=>{$("#starmap").hide()}); 
</script>



</body></html>
